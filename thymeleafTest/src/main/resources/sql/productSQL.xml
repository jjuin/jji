<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.example.spring.product.ProductDAO"> 
<!-- mybatis-confg.xml 에 Alias 되어 있습니다. --> 
	<select id="selectProductList" resultType="com.example.spring.product.ProductDTO"
									parameterType = "com.example.spring.product.ProductDTO"> 
		SELECT * FROM PRODUCT
		<where>
		<if test="searchOption != null">
				PROD_CATEGORY_NM in <foreach item="search" collection="searchOption" open="(" close=")" separator="," >
					#{search}
				</foreach>
		</if>
		<if test="priceSearchOptionCD != null">
				and PROD_PRICE_CD in <foreach item="price" collection="priceSearchOptionCD" open="(" close=")" separator="," >
					#{price}
				</foreach>
		</if>
		</where>
			<!-- <include refid = "search"></include> -->
	</select>
	
	

	<!-- <sql id = "search">
		<choose>
			<when test = "searchOption == 'all'">
			<choose>
				<when test = "priceSearchOptionCD == '1'">
					[CDATA[ where prod_price < 10000 ]]
				</when>
				<when test = "priceSearchOptionCD == '2'">
					where prod_price BETWEEN 10000 AND 49999
				</when>
				<when test = "priceSearchOptionCD == '3'">
					where prod_price BETWEEN 50000 AND 99999
				</when>
				<when test = "priceSearchOptionCD == '4'">
					where prod_price BETWEEN 100000 AND 299999
				</when>
				<when test = "priceSearchOptionCD == '5'">
					[CDATA[where prod_price >= 300000 ]]
				</when>
			</choose>
			</when>
			<otherwise>
				where prod_category_nm = #{searchOption}
				<choose>
					<when test = "priceSearchOptionCD == '1'">
						[CDATA[ and prod_price < 10000 ]]
					</when>
					<when test = "priceSearchOptionCD == '2'">
						and prod_price BETWEEN 10000 AND 49999
					</when>
					<when test = "priceSearchOptionCD == '3'">
						and prod_price BETWEEN 50000 AND 99999
					</when>
					<when test = "priceSearchOptionCD == '4'">
						and prod_price BETWEEN 100000 AND 299999
					</when>
					<when test = "priceSearchOptionCD == '5'">
						[CDATA[ and prod_price >= 300000 ]]
					</when>
				</choose>
			</otherwise>
		</choose>
	</sql>
	 -->
 
</mapper> 
