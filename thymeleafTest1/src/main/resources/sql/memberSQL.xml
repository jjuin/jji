<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace = "com.example.spring.api.MemberDAO">
	<!-- 로그인 세션 -->
	<select id = "loginSession" resultType="com.example.spring.api.MemberDTO">
		select cus_name, ori_no, cus_id
		from member
		where cus_id = #{cus_id}
	</select>
	
	<!-- 로그인 체크 -->
	<select id = "loginCheck" resultType="int">
		select count(*)
		from member
		where cus_id = #{cus_id} and cus_pw = #{cus_pw}
	</select>
	
	<!-- 로그인할때 history에 추가 -->
	<insert id = "insertHistory" parameterType = "com.example.spring.api.MemberDTO">
		insert into login_history
		values(
		LOGIN_HIS_SEQ.NEXTVAL, 
		sysdate, 
		#{ori_no}
		
		<!-- (select ori_no
		from member
		where cus_id = #{cus_id}) -->
		)
	</insert>
	
	<!-- 복호화 해주기 위해 id추출 -->
	<!-- 
	<select id = "selectLoginID" resultType="MemberVO">
		select
		cus_id
		from member
		where cus_id = #{cus_id}
	</select> -->
	
	
	
<!-- 	<select id = "memberList" resultType="MemberVO">
		select
		ori_no,
		cus_id,
		cus_pw,
		cus_name
		from member
		where cus_isshow = 'Y'
	</select>
	
	<select id = "viewMember" resultType="MemberVO">
		select
		ori_no,
		cus_id,
		cus_pw,
		cus_name
		from member
		where cus_id = #{cus_id}
	</select>
	
	<update id = "updateMember">
		update member
		set
		cus_id=  #{cus_id},
		cus_pw = #{cus_pw},
		cus_name = #{cus_name}
		where 
		cus_id = #{cus_id}
	</update>
	
	<update id = "deleteMember">
		update member
		set
		cus_isshow = 'N'
		where 
		cus_id = #{cus_id}
	</update>
	 -->
	
</mapper>